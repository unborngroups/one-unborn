ALTER TABLE account_groups
ADD parent_id BIGINT UNSIGNED NULL AFTER id,
ADD status ENUM('draft','pending_checker','approved','rejected','locked')
    DEFAULT 'draft' AFTER type,
ADD is_locked TINYINT(1) DEFAULT 0 AFTER status,
ADD maker_id BIGINT UNSIGNED NULL,
ADD checker_id BIGINT UNSIGNED NULL,
ADD approved_at TIMESTAMP NULL;



-- 
-- 
SELECT f.*
FROM feasibilities f
JOIN feasibility_statuses fs ON fs.feasibility_id = f.id
WHERE fs.status = 'Closed'
AND f.id NOT IN (SELECT feasibility_id FROM purchase_orders);

SELECT d.*
FROM deliverable_plans d
JOIN deliverable_plans_statuses ds ON ds.deliverable_plan_id = d.id
WHERE ds.status = 'Closed';

SELECT f.id, f.feasibility_request_id, f.address
FROM feasibilities f
JOIN feasibility_statuses fs ON fs.feasibility_id = f.id
WHERE fs.status = 'Closed'
AND f.id NOT IN (SELECT feasibility_id FROM purchase_orders);
-- /
-- /

ALTER TABLE purchase_orders
ADD COLUMN `feasibility_request_id` VARCHAR(255) NULL AFTER 'feasibility_id';

ALTER TABLE deliverables
CHANGE payment_account_or_username_1 payment_account_1 TEXT NULL,
ADD COLUMN payment_username_1 TEXT NULL AFTER payment_account_1;

ALTER TABLE deliverables
CHANGE payment_account_or_username_2 payment_account_2 TEXT NULL,
ADD COLUMN payment_username_2 TEXT NULL AFTER payment_account_2;

ALTER TABLE deliverables
CHANGE payment_account_or_username_3 payment_account_3 TEXT NULL,
ADD COLUMN payment_username_3 TEXT NULL AFTER payment_account_3;

ALTER TABLE deliverables
CHANGE payment_account_or_username_4 payment_account_4 TEXT NULL,
ADD COLUMN payment_username_4 TEXT NULL AFTER payment_account_4;

ALTER TABLE deliverable_plans
CHANGE payment_account_or_username payment_account TEXT NULL,
ADD COLUMN payment_username TEXT NULL AFTER payment_account;

ALTER TABLE deliverable_plans
CHANGE payment_account_or_username payment_account TEXT NULL,
ADD COLUMN payment_username TEXT NULL AFTER payment_account;

ALTER TABLE email_templates
ADD event_key VARCHAR(255) NULL AFTER company_id;

ALTER TABLE purchase_orders
ADD COLUMN `feasibility_request_id` VARCHAR(255) NULL AFTER 'feasibility_id';

ALTER TABLE renewals
ADD COLUMN `circuit_id` VARCHAR(255) NULL AFTER `deliverable_id`;

images/purchaseorder/PO%20ASPTN-121%20%281%29.pdf
images/purchaseorder/UNBORN%2011%20%282%29.pdf

ALTER TABLE renewals
ADD COLUMN status VARCHAR(20) DEFAULT 'Active' AFTER alert_date;

ALTER TABLE clients
ADD COLUMN billing_sequence VARCHAR(225) NULL AFTER billing_spoc_email;

ALTER TABLE terminations
DROP COLUMN date_of_delivered;

ALTER TABLE terminations MODIFY circuit_id VARCHAR(225);

UPDATE terminations
SET status = 
    CASE
        WHEN termination_date IS NOT NULL THEN 'Terminated'
        WHEN termination_request_date IS NOT NULL THEN 'Pending'
        ELSE NULL
    END;


ALTER TABLE feasibilities
ADD COLUMN circuit_id VARCHAR(255) NULL AFTER delivery_company_name;


ALTER TABLE private_messages
ADD COLUMN `file_path` VARCHAR(255) NULL AFTER `message`,  
ADD COLUMN `file_type` VARCHAR(100) NULL AFTER `file_path`,  
ADD COLUMN `original_name` VARCHAR(255) NULL AFTER `file_type`;     

-- To add the column
ALTER TABLE users ADD COLUMN require_otp_always TINYINT(1) NOT NULL DEFAULT 0 AFTER email;

-- To remove the column
ALTER TABLE users DROP COLUMN require_otp_always;
-- ------------------------------------------update pannanum-----------------------------
--TO add the column
ALTER TABLE clients 
ADD COLUMN delivered_email VARCHAR(500) NULL AFTER invoice_cc,
ADD COLUMN delivered_cc VARCHAR(1000) NULL AFTER delivered_email;

ALTER TABLE deliverables
ADD COLUMN speed_test_file VARCHAR(255) NULL AFTER export_file,
ADD COLUMN ping_report_dns_file VARCHAR(255) NULL AFTER speed_test_file,
ADD COLUMN ping_report_gateway_file VARCHAR(255) NULL AFTER ping_report_dns_file,
ADD COLUMN onu_ont_device_file VARCHAR(255) NULL AFTER ping_report_gateway_file,
ADD COLUMN static_ip_file VARCHAR(255) NULL AFTER onu_ont_device_file;

ALTER TABLE company_settings
ADD COLUMN general_mail_host VARCHAR(255) NULL AFTER mail_signature,
ADD COLUMN general_mail_port VARCHAR(255) NULL AFTER general_mail_host,
ADD COLUMN general_mail_username VARCHAR(255) NULL AFTER general_mail_port,
ADD COLUMN general_mail_password VARCHAR(255) NULL AFTER general_mail_username,
ADD COLUMN general_mail_encryption VARCHAR(255) NULL AFTER general_mail_password,
ADD COLUMN general_mail_from_address VARCHAR(255) NULL AFTER general_mail_encryption,
ADD COLUMN general_mail_from_name VARCHAR(255) NULL AFTER general_mail_from_address,
ADD COLUMN general_mail_footer VARCHAR(255) NULL AFTER general_mail_from_name,
ADD COLUMN general_mail_signature VARCHAR(255) NULL AFTER general_mail_footer,

ADD COLUMN delivery_mail_host VARCHAR(255) NULL AFTER general_mail_signature,
ADD COLUMN delivery_mail_port VARCHAR(255) NULL AFTER delivery_mail_host,
ADD COLUMN delivery_mail_username VARCHAR(255) NULL AFTER delivery_mail_port,
ADD COLUMN delivery_mail_password VARCHAR(255) NULL AFTER delivery_mail_username,   
ADD COLUMN delivery_mail_encryption VARCHAR(255) NULL AFTER delivery_mail_password,
ADD COLUMN delivery_mail_from_address VARCHAR(255) NULL AFTER delivery_mail_encryption,
ADD COLUMN delivery_mail_from_name VARCHAR(255) NULL AFTER delivery_mail_from_address,
ADD COLUMN delivery_mail_footer VARCHAR(255) NULL AFTER delivery_mail_from_name,
ADD COLUMN delivery_mail_signature VARCHAR(255) NULL AFTER delivery_mail_footer,

ADD COLUMN invoice_mail_host VARCHAR(255) NULL AFTER delivery_mail_signature,
ADD COLUMN invoice_mail_port VARCHAR(255) NULL AFTER invoice_mail_host,
ADD COLUMN invoice_mail_username VARCHAR(255) NULL AFTER invoice_mail_port,
ADD COLUMN invoice_mail_password VARCHAR(255) NULL AFTER invoice_mail_username,
ADD COLUMN invoice_mail_encryption VARCHAR(255) NULL AFTER invoice_mail_password,
ADD COLUMN invoice_mail_from_address VARCHAR(255) NULL AFTER invoice_mail_encryption,
ADD COLUMN invoice_mail_from_name VARCHAR(255) NULL AFTER invoice_mail_from_address,
ADD COLUMN invoice_mail_footer VARCHAR(255) NULL AFTER invoice_mail_from_name;
ADD COLUMN invoice_mail_signature VARCHAR(255) NULL AFTER invoice_mail_footer;
